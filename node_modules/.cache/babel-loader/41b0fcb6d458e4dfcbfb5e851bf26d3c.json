{"ast":null,"code":"import unknownImage from \"../assets/images/unknownImage.png\";\nimport random from \"./random\";\nexport default (obj => {\n  var _saleInfo$listPrice;\n\n  const {\n    accessInfo,\n    volumeInfo,\n    saleInfo\n  } = obj;\n  const canBeBought = saleInfo.saleability == \"FOR_SALE\" && ((_saleInfo$listPrice = saleInfo.listPrice) === null || _saleInfo$listPrice === void 0 ? void 0 : _saleInfo$listPrice.amount) != 0;\n  const prices = canBeBought ? {\n    listPrice: Math.round(saleInfo.listPrice.amount) + \" \" + saleInfo.listPrice.currencyCode,\n    retailPrice: Math.round(saleInfo.retailPrice.amount) + \" \" + saleInfo.retailPrice.currencyCode\n  } : {};\n\n  function makeString(mass) {\n    return mass ? mass.reduce((curr, next) => curr + \" , \" + next) : \"Unknown\";\n  }\n\n  function formatText(textObj) {\n    let text = textObj ? textObj.textSnippet : \"\";\n    if (!text) return \"Unknown\";\n    text = text.replaceAll(\"<b>\", \"\");\n    text = text.replaceAll(\"</b>\", \"\");\n    return text;\n  }\n\n  const generateKey = () => {\n    let str = \"\";\n\n    for (let i = 0; i < 25; i++) {\n      str += random(0, 9);\n    }\n\n    return str;\n  };\n\n  let image = !volumeInfo.imageLinks ? unknownImage : volumeInfo.imageLinks.thumbnail;\n  const result = {\n    title: volumeInfo.title.slice(0, 60),\n    image: image,\n    epub: accessInfo.epub.isAvailable,\n    pdf: accessInfo.pdf.isAvailable,\n    type: saleInfo.isEbook ? \"Electronic\" : \"Non electronic\",\n    canBeBought: canBeBought,\n    ...prices,\n    country: saleInfo.country,\n    authors: makeString(volumeInfo.authors),\n    rating: volumeInfo.averageRating || 0,\n    categories: makeString(volumeInfo.categories),\n    description: volumeInfo.description || formatText(obj.searchInfo),\n    language: volumeInfo.language,\n    pageCount: volumeInfo.pageCount,\n    subtitle: volumeInfo.subtitle,\n    publishedDate: volumeInfo.publishedDate,\n    link: canBeBought ? saleInfo.buyLink : volumeInfo.previewLink,\n    publisher: volumeInfo.publisher,\n    key: generateKey()\n  };\n\n  for (let key in result) {\n    if (result[key] === undefined) result[key] = \"Unknown\";\n  }\n\n  return result;\n});","map":{"version":3,"sources":["C:/My/Programesoft/Javascript/bookshop/src/functions/formater.js"],"names":["unknownImage","random","obj","accessInfo","volumeInfo","saleInfo","canBeBought","saleability","listPrice","amount","prices","Math","round","currencyCode","retailPrice","makeString","mass","reduce","curr","next","formatText","textObj","text","textSnippet","replaceAll","generateKey","str","i","image","imageLinks","thumbnail","result","title","slice","epub","isAvailable","pdf","type","isEbook","country","authors","rating","averageRating","categories","description","searchInfo","language","pageCount","subtitle","publishedDate","link","buyLink","previewLink","publisher","key","undefined"],"mappings":"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","sourcesContent":["\r\nimport unknownImage from \"../assets/images/unknownImage.png\"\r\nimport random from \"./random\";\r\nexport default (obj)=>{\r\n\tconst {accessInfo,volumeInfo,saleInfo}=obj;\r\n\tconst canBeBought=saleInfo.saleability==\"FOR_SALE\" && saleInfo.listPrice?.amount!=0;\r\n\tconst prices=canBeBought ? {\r\n\t\tlistPrice:Math.round(saleInfo.listPrice.amount) + \" \"+ saleInfo.listPrice.currencyCode,\r\n\t\tretailPrice:Math.round(saleInfo.retailPrice.amount)+\" \"+saleInfo.retailPrice.currencyCode\r\n\t} : {};\r\n\tfunction makeString(mass) {\r\n\t\treturn mass ?\tmass.reduce((curr,next)=>curr+\" , \"+next) : \"Unknown\"\r\n\t}\r\n\tfunction formatText(textObj) {\r\n\t\tlet text=textObj ? textObj.textSnippet : \"\";\r\n\t\tif (!text) return \"Unknown\";\r\n\t\ttext=text.replaceAll(\"<b>\",\"\");\r\n\t\ttext=text.replaceAll(\"</b>\",\"\");\r\n\t\treturn text;\r\n\t}\r\n\tconst generateKey=()=>{\r\n\t\tlet str=\"\";\r\n\t\tfor (let i=0;i<25;i++) {\r\n\t\t\tstr+=random(0,9);\r\n\t\t}\r\n\t\treturn str;\r\n\t}\r\n\tlet image=!volumeInfo.imageLinks ? unknownImage : volumeInfo.imageLinks.thumbnail;\r\n\tconst result= {\r\n\t\ttitle:volumeInfo.title.slice(0,60),\r\n\t\timage:image,\r\n\t\tepub:accessInfo.epub.isAvailable,\r\n\t\tpdf:accessInfo.pdf.isAvailable,\r\n\t\ttype:saleInfo.isEbook ? \"Electronic\" : \"Non electronic\",\r\n\t\tcanBeBought:canBeBought,\r\n\t\t...prices,\r\n\t\tcountry:saleInfo.country,\r\n\t\tauthors:makeString(volumeInfo.authors),\r\n\t\trating:volumeInfo.averageRating || 0,\r\n\t\tcategories:makeString(volumeInfo.categories),\r\n\t\tdescription:volumeInfo.description || formatText(obj.searchInfo),\r\n\t\tlanguage:volumeInfo.language,\r\n\t\tpageCount:volumeInfo.pageCount,\r\n\t\tsubtitle:volumeInfo.subtitle,\r\n\t\tpublishedDate:volumeInfo.publishedDate,\r\n\t\tlink:canBeBought ? saleInfo.buyLink : volumeInfo.previewLink,\r\n\t\tpublisher:volumeInfo.publisher,\r\n\t\tkey:generateKey()\r\n\t};\r\n\tfor (let key in result) {\r\n\t\tif (result[key]===undefined) result[key]=\"Unknown\"\r\n\t}\r\n\treturn result;\r\n}"]},"metadata":{},"sourceType":"module"}