{"ast":null,"code":"var _jsxFileName = \"C:\\\\My\\\\Programesoft\\\\Javascript\\\\bookshop\\\\src\\\\screens\\\\Library\\\\components\\\\BookShelf.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect, useRef, createContext, useMemo } from \"react\";\nimport Delete from \"../../../assets/images/delete.png\";\nimport ArrowUpward from \"../../../assets/images/arrowUpward.png\";\nimport ArrowDownward from \"../../../assets/images/arrowDownward.png\";\nimport Plus from \"../../../assets/images/plus.png\";\nimport { Droppable } from \"react-beautiful-dnd\";\nimport BookCard from \"../../../globalComponents/BookCard\";\nimport manageLocalStorage from \"../../../functions/manageLocalStorage\";\nimport { StyleRoot } from \"radium\";\nimport animations from \"../../../animations\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const LibraryContext = /*#__PURE__*/createContext();\n\nconst BookShelf = _ref => {\n  _s();\n\n  let {\n    favoriteBooks,\n    title,\n    setLibraries,\n    ind,\n    setAddingBook,\n    addingBook,\n    libraries\n  } = _ref;\n  const [showHiddenBooks, setShowHiddenBooks] = useState(false);\n\n  const deleteHandler = () => {\n    if (window.confirm(`Are you sure you want to delete ${title} library`)) {\n      const libraryName = libraries.splice(ind, 1)[0];\n      favoriteBooks.forEach(_ref2 => {\n        let {\n          libraries\n        } = _ref2;\n        let index = libraries.indexOf(libraryName);\n        if (index > -1) libraries.splice(index, 1);\n      });\n      setLibraries(curr => [...curr]);\n      manageLocalStorage.set(\"libraries\", libraries);\n      manageLocalStorage.set(\"favoriteBooks\", favoriteBooks);\n    }\n  };\n\n  const addHandler = () => {\n    setAddingBook(curr => ({ ...curr,\n      active: true,\n      bookShelfIndex: ind\n    }));\n  };\n\n  const bookCards = useMemo(() => {\n    const results = favoriteBooks.filter(elem => {\n      if (!elem.libraries.length) return false;\n\n      for (let i = 0; i < elem.libraries.length; i++) {\n        if (elem.libraries[i] == title) return true;\n      }\n    });\n    return results.map(elem => /*#__PURE__*/_jsxDEV(BookCard, {\n      data: elem,\n      mode: \"inBookShelf\"\n    }, elem.key, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this));\n  });\n  const initialSet = useRef(true);\n  useEffect(() => {\n    initialSet.current = false;\n  }, []);\n  return /*#__PURE__*/_jsxDEV(StyleRoot, {\n    style: initialSet.current ? ind % 2 == 0 ? animations.slideInLeft : animations.slideInRight : {},\n    children: /*#__PURE__*/_jsxDEV(Droppable, {\n      droppableId: title,\n      isDropDisabled: !(addingBook.bookShelfIndex == ind),\n      children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"library__line \" + (snapshot.isDraggingOver ? \"library__dropOn\" : \"\"),\n        ref: provided.innerRef,\n        ...provided.droppableProps,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"library__top beet\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"library__title title\",\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"button black library__button addBooks\",\n            onClick: addHandler,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"beet\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: Plus\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Add books\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"library__bookShelf grid\",\n          children: /*#__PURE__*/_jsxDEV(LibraryContext.Provider, {\n            value: {\n              title,\n              setLibraries\n            },\n            children: [showHiddenBooks ? bookCards : bookCards.slice(0, 9), \" \", provided.placeholder]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"library__buttons beet\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"button black library__button addBooks screen-top\",\n            onClick: deleteHandler,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"beet\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: Delete\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Delete library\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), bookCards.length > 9 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"button library__button addBooks screen-top \" + (showHiddenBooks ? \"green\" : \"blue\"),\n            onClick: () => setShowHiddenBooks(curr => !curr),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"beet\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: showHiddenBooks ? ArrowUpward : ArrowDownward\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Show \", showHiddenBooks ? \"less\" : \"more\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 50\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n\n_s(BookShelf, \"re63562P7Mc8LBuL87HZl7FD/vs=\");\n\n_c = BookShelf;\nexport default BookShelf;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookShelf\");","map":{"version":3,"sources":["C:/My/Programesoft/Javascript/bookshop/src/screens/Library/components/BookShelf.js"],"names":["React","useState","useContext","useEffect","useRef","createContext","useMemo","Delete","ArrowUpward","ArrowDownward","Plus","Droppable","BookCard","manageLocalStorage","StyleRoot","animations","LibraryContext","BookShelf","favoriteBooks","title","setLibraries","ind","setAddingBook","addingBook","libraries","showHiddenBooks","setShowHiddenBooks","deleteHandler","window","confirm","libraryName","splice","forEach","index","indexOf","curr","set","addHandler","active","bookShelfIndex","bookCards","results","filter","elem","length","i","map","key","initialSet","current","slideInLeft","slideInRight","provided","snapshot","isDraggingOver","innerRef","droppableProps","slice","placeholder"],"mappings":"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","sourcesContent":["import React, {\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  createContext,\r\n  useMemo,\r\n} from \"react\";\r\nimport Delete from \"../../../assets/images/delete.png\";\r\nimport ArrowUpward from \"../../../assets/images/arrowUpward.png\";\r\nimport ArrowDownward from \"../../../assets/images/arrowDownward.png\";\r\nimport Plus from \"../../../assets/images/plus.png\";\r\nimport { Droppable } from \"react-beautiful-dnd\";\r\nimport BookCard from \"../../../globalComponents/BookCard\";\r\nimport manageLocalStorage from \"../../../functions/manageLocalStorage\";\r\nimport { StyleRoot } from \"radium\";\r\nimport animations from \"../../../animations\";\r\nexport const LibraryContext = createContext();\r\nconst BookShelf = ({\r\n  favoriteBooks,\r\n  title,\r\n  setLibraries,\r\n  ind,\r\n  setAddingBook,\r\n  addingBook,\r\n  libraries,\r\n}) => {\r\n  const [showHiddenBooks, setShowHiddenBooks] = useState(false);\r\n  const deleteHandler = () => {\r\n    if (window.confirm(`Are you sure you want to delete ${title} library`)) {\r\n      const libraryName = libraries.splice(ind, 1)[0];\r\n      favoriteBooks.forEach(({ libraries }) => {\r\n        let index = libraries.indexOf(libraryName);\r\n        if (index > -1) libraries.splice(index, 1);\r\n      });\r\n      setLibraries((curr) => [...curr]);\r\n      manageLocalStorage.set(\"libraries\", libraries);\r\n      manageLocalStorage.set(\"favoriteBooks\", favoriteBooks);\r\n    }\r\n  };\r\n  const addHandler = () => {\r\n    setAddingBook((curr) => ({ ...curr, active: true, bookShelfIndex: ind }));\r\n  };\r\n  const bookCards = useMemo(() => {\r\n    const results = favoriteBooks.filter((elem) => {\r\n      if (!elem.libraries.length) return false;\r\n      for (let i = 0; i < elem.libraries.length; i++) {\r\n        if (elem.libraries[i] == title) return true;\r\n      }\r\n    });\r\n    return results.map((elem) => (\r\n      <BookCard data={elem} mode=\"inBookShelf\" key={elem.key} />\r\n    ));\r\n  });\r\n  const initialSet=useRef(true);\r\n  useEffect(()=>{\r\n    initialSet.current=false\r\n  },[])\r\n  return (\r\n    <StyleRoot style={initialSet.current ? (ind%2==0 ? animations.slideInLeft : animations.slideInRight) : {}}>\r\n      <Droppable\r\n        droppableId={title}\r\n        isDropDisabled={!(addingBook.bookShelfIndex == ind)}\r\n      >\r\n        {(provided, snapshot) => (\r\n          <div\r\n            className={\r\n              \"library__line \" +\r\n              (snapshot.isDraggingOver ? \"library__dropOn\" : \"\")\r\n            }\r\n            ref={provided.innerRef}\r\n            {...provided.droppableProps}\r\n          >\r\n            <div className=\"library__top beet\">\r\n              <p className=\"library__title title\">{title}</p>\r\n              <div\r\n                className=\"button black library__button addBooks\"\r\n                onClick={addHandler}\r\n              >\r\n                <div className=\"beet\">\r\n                  <img src={Plus} />\r\n                  <p>Add books</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"library__bookShelf grid\">\r\n              <LibraryContext.Provider value={{ title, setLibraries }}>\r\n                {showHiddenBooks ? bookCards : bookCards.slice(0,9)} {provided.placeholder}\r\n              </LibraryContext.Provider>\r\n            </div>\r\n            <div className=\"library__buttons beet\">\r\n              <div\r\n                className=\"button black library__button addBooks screen-top\"\r\n                onClick={deleteHandler}\r\n              >\r\n                <div className=\"beet\">\r\n                  <img src={Delete} />\r\n                  <p>Delete library</p>\r\n                </div>\r\n              </div>\r\n            {bookCards.length>9 &&               <div\r\n                className={\r\n                  \"button library__button addBooks screen-top \" +\r\n                  (showHiddenBooks ? \"green\" : \"blue\")\r\n                }\r\n                onClick={() => setShowHiddenBooks((curr) => !curr)}\r\n              >\r\n                <div className=\"beet\">\r\n                  <img src={showHiddenBooks ? ArrowUpward : ArrowDownward} />\r\n                  <p>Show {showHiddenBooks ? \"less\" : \"more\"}</p>\r\n                </div>\r\n              </div>}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Droppable>\r\n    </StyleRoot>\r\n  );\r\n};\r\nexport default BookShelf;\r\n"]},"metadata":{},"sourceType":"module"}