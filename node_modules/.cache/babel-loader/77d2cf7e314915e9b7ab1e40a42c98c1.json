{"ast":null,"code":"var _jsxFileName = \"C:\\\\My\\\\Programesoft\\\\Javascript\\\\bookshop\\\\src\\\\screens\\\\Library\\\\components\\\\BookShelf.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect, useRef, createContext, useMemo } from \"react\";\nimport Delete from \"../../../assets/images/delete.png\";\nimport ArrowUpward from \"../../../assets/images/arrowUpward.png\";\nimport ArrowDownward from \"../../../assets/images/arrowDownward.png\";\nimport Plus from \"../../../assets/images/plus.png\";\nimport { Droppable } from 'react-beautiful-dnd';\nimport BookCard from \"../../../globalComponents/BookCard\";\nimport manageLocalStorage from \"../../../functions/manageLocalStorage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst BookShelf = _ref => {\n  _s();\n\n  let {\n    favoriteBooks,\n    title,\n    setLibraries,\n    ind,\n    setAddingBook,\n    addingBook,\n    libraries\n  } = _ref;\n  const [showHiddenBooks, setShowHiddenBooks] = useState(false);\n\n  const deleteHandler = () => {\n    if (window.confirm(`Are you sure you want to delete ${title} library`)) {\n      const libraryName = libraries.splice(ind, 1)[0];\n      favoriteBooks.forEach(_ref2 => {\n        let {\n          libraries\n        } = _ref2;\n        let index = libraries.indexOf(libraryName);\n        if (index > -1) libraries.splice(index, 1);\n      }); //manageLocalStorage.set(\"libraries\",libraries);\n    }\n  };\n\n  const addHandler = () => {\n    setAddingBook(curr => ({ ...curr,\n      active: true,\n      bookShelfIndex: ind\n    }));\n  };\n\n  const bookCards = useMemo(() => {\n    const results = favoriteBooks.filter(elem => {\n      if (!elem.libraries.length) return false;\n\n      for (let i = 0; i < elem.libraries.length; i++) {\n        if (elem.libraries[i] == title) return true;\n      }\n    });\n    return results.map(elem => /*#__PURE__*/_jsxDEV(BookCard, {\n      data: elem,\n      mode: \"inBookShelf\"\n    }, elem.key, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 30\n    }, this));\n  });\n  return /*#__PURE__*/_jsxDEV(Droppable, {\n    droppableId: title,\n    isDropDisabled: !(addingBook.bookShelfIndex == ind),\n    children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"library__line \" + (snapshot.isDraggingOver ? \"library__dropOn\" : \"\"),\n      ref: provided.innerRef,\n      ...provided.droppableProps,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"library__top beet\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"library__title title\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button black library__button addBooks\",\n          onClick: addHandler,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"beet\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: Plus\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Add books\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"library__bookShelf grid\",\n        children: [bookCards, \" \", provided.placeholder]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"library__buttons beet\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button black library__button addBooks screen-top\",\n          onClick: deleteHandler,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"beet\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: Delete\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Delete library\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button library__button addBooks screen-top \" + (showHiddenBooks ? \"green\" : \"blue\"),\n          onClick: () => setShowHiddenBooks(curr => !curr),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"beet\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: showHiddenBooks ? ArrowUpward : ArrowDownward\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Show \", showHiddenBooks ? \"less\" : \"more\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n\n_s(BookShelf, \"Na3xY69gollKkQiOPMy+h755neQ=\");\n\n_c = BookShelf;\nexport default BookShelf;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookShelf\");","map":{"version":3,"sources":["C:/My/Programesoft/Javascript/bookshop/src/screens/Library/components/BookShelf.js"],"names":["React","useState","useContext","useEffect","useRef","createContext","useMemo","Delete","ArrowUpward","ArrowDownward","Plus","Droppable","BookCard","manageLocalStorage","BookShelf","favoriteBooks","title","setLibraries","ind","setAddingBook","addingBook","libraries","showHiddenBooks","setShowHiddenBooks","deleteHandler","window","confirm","libraryName","splice","forEach","index","indexOf","addHandler","curr","active","bookShelfIndex","bookCards","results","filter","elem","length","i","map","key","provided","snapshot","isDraggingOver","innerRef","droppableProps","placeholder"],"mappings":"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","sourcesContent":["import React, {\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  createContext,\r\n  useMemo,\r\n} from \"react\";\r\nimport Delete from \"../../../assets/images/delete.png\";\r\nimport ArrowUpward from \"../../../assets/images/arrowUpward.png\";\r\nimport ArrowDownward from \"../../../assets/images/arrowDownward.png\";\r\nimport Plus from \"../../../assets/images/plus.png\";\r\nimport { Droppable } from 'react-beautiful-dnd';\r\nimport BookCard from \"../../../globalComponents/BookCard\";\r\nimport manageLocalStorage from \"../../../functions/manageLocalStorage\";\r\nconst BookShelf = ({ favoriteBooks,title,setLibraries,ind,setAddingBook,addingBook,libraries }) => {\r\n\tconst [showHiddenBooks,setShowHiddenBooks]=useState(false);\r\n\tconst deleteHandler=()=>{\r\n    if (window.confirm(`Are you sure you want to delete ${title} library`)) {\r\n      const libraryName=libraries.splice(ind,1)[0];\r\n      favoriteBooks.forEach(({libraries})=>{\r\n        let index=libraries.indexOf(libraryName);\r\n        if (index>-1) libraries.splice(index,1);\r\n      })\r\n      //manageLocalStorage.set(\"libraries\",libraries);\r\n    }\r\n\t}\r\n\tconst addHandler=()=>{\r\n\t\tsetAddingBook(curr=>({...curr,active:true,bookShelfIndex:ind}))\r\n\t}\r\n\tconst bookCards=useMemo(()=>{\r\n\t\tconst results=favoriteBooks.filter((elem)=>{\r\n\t\t\tif (!elem.libraries.length) return false;\r\n\t\t\tfor (let i=0;i<elem.libraries.length;i++) {\r\n\t\t\t\tif (elem.libraries[i]==title) return true;\r\n\t\t\t}\r\n    });\r\n\t\treturn results.map((elem)=><BookCard data={elem} mode=\"inBookShelf\" key={elem.key}/>);\r\n  });\r\n  return (\r\n    <Droppable droppableId={title} isDropDisabled={!(addingBook.bookShelfIndex==ind)}>\r\n    {(provided, snapshot)=>(\r\n      <div className={\"library__line \"+(snapshot.isDraggingOver ? \"library__dropOn\" : \"\")} ref={provided.innerRef} {...provided.droppableProps}>\r\n      <div className=\"library__top beet\">\r\n        <p className=\"library__title title\">{title}</p>\r\n        <div className=\"button black library__button addBooks\" onClick={addHandler}>\r\n          <div className=\"beet\">\r\n            <img src={Plus} />\r\n            <p>Add books</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"library__bookShelf grid\">{bookCards} {provided.placeholder}</div>\r\n      <div className=\"library__buttons beet\">\r\n        <div className=\"button black library__button addBooks screen-top\" onClick={deleteHandler}>\r\n          <div className=\"beet\">\r\n            <img src={Delete} />\r\n            <p>Delete library</p>\r\n          </div>\r\n        </div>\r\n\t\t\t\t<div className={\"button library__button addBooks screen-top \"+(showHiddenBooks ? \"green\" : \"blue\")} onClick={()=>setShowHiddenBooks(curr=>!curr)}>\r\n          <div className=\"beet\">\r\n            <img src={showHiddenBooks ? ArrowUpward : ArrowDownward} />\r\n            <p>Show {showHiddenBooks ? \"less\" : \"more\"}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    )}\r\n    </Droppable>\r\n  );\r\n};\r\nexport default BookShelf;"]},"metadata":{},"sourceType":"module"}