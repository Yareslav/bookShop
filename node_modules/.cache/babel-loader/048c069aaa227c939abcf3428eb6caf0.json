{"ast":null,"code":"var _jsxFileName = \"C:\\\\My\\\\Programesoft\\\\Javascript\\\\bookshop\\\\src\\\\globalComponents\\\\BookCard.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState, useMemo } from \"react\";\nimport NotSelected from \"../assets/images/favourite.png\";\nimport Selected from \"../assets/images/favouriteActive.png\";\nimport compare from \"../functions/compare\";\nimport Eye from \"../assets/images/eye.png\";\nimport starFilled from \"../assets/images/starFilled.png\";\nimport starHalfFilled from \"../assets/images/starHalfFilled.png\";\nimport starEmpty from \"../assets/images/starEmpty.png\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Book = _ref => {\n  _s();\n\n  let {\n    data,\n    mode\n  } = _ref;\n  const isInFavorites = useMemo(() => {\n    const favoriteBooks = JSON.parse(localStorage.getItem(\"favoriteBooks\"));\n\n    for (let i = 0; i < favoriteBooks.length; i++) {\n      if (compare(favoriteBooks[i], data)) return true;\n    }\n\n    return false;\n  }, []);\n  const [liked, setLiked] = useState(isInFavorites);\n\n  const getStars = amount => {\n    const mass = [],\n          roundNumber = Math.floor(amount);\n\n    for (let i = 0; i < roundNumber; i++) {\n      mass.push(starFilled);\n    }\n\n    if (amount != roundNumber) mass.push(starHalfFilled);\n    const length = mass.length;\n\n    for (let i = 0; i < 5 - length; i++) {\n      mass.push(starEmpty);\n    }\n\n    return mass.map(elem => /*#__PURE__*/_jsxDEV(\"img\", {\n      src: elem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 31\n    }, this));\n  };\n\n  const returnBook = () => {\n    const title = /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"book__title\",\n      children: data.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 19\n    }, this),\n          stars = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"book__stars\",\n      children: getStars(data.rating)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 15\n    }, this);\n\n    if (mode == \"normal\") return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"book beet2 book__align\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"book__imageBlock\",\n        children: [/*#__PURE__*/_jsxDEV(ShowPreview, {\n          data: data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Image, {\n          image: data.image,\n          style: \"book__imageBig\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Hearth, {\n          liked,\n          setLiked,\n          data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this), title, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"book__container beet\",\n        children: [stars, /*#__PURE__*/_jsxDEV(Authors, {\n          authors: data.authors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        data: data,\n        style: \"book__normalButton\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this);else if (mode == \"large\") return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"book beet\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"book__largeBlock\",\n        children: [/*#__PURE__*/_jsxDEV(ShowPreview, {\n          data: data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Image, {\n          image: data.image,\n          style: \"book__imageSmall\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Hearth, {\n          liked,\n          setLiked,\n          data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"book__largeContainer\",\n        children: [title, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"book__mass beet\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"beet\",\n            children: [stars, /*#__PURE__*/_jsxDEV(Authors, {\n              authors: data.authors\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            style: \"book__largeButton\",\n            data: data\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"book__description\",\n          children: data.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this);else return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"book beet2\",\n      children: [/*#__PURE__*/_jsxDEV(Image, {\n        image: data.image,\n        style: \"book__imageSmall\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), title]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this);\n  };\n\n  return returnBook();\n};\n\n_s(Book, \"AcJDCHk69zQBpdsubMSirus51z8=\");\n\n_c = Book;\nexport default Book;\n\nconst Button = _ref2 => {\n  let {\n    data,\n    style\n  } = _ref2;\n  return /*#__PURE__*/_jsxDEV(\"a\", {\n    className: \"button \" + style,\n    href: data.link,\n    target: \"_blank\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [data.canBeBought ? `Buy` : \"Read\", \" for\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n        children: data.canBeBought ? data.listPrice : \"free\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 3\n  }, this);\n};\n\n_c2 = Button;\n\nconst Hearth = _ref3 => {\n  let {\n    liked,\n    setLiked,\n    data\n  } = _ref3;\n\n  const clickHandler = () => {\n    const favoriteBooks = JSON.parse(localStorage.getItem(\"favoriteBooks\"));\n    if (!liked) favoriteBooks.push(data);else {\n      let index;\n      favoriteBooks.forEach((elem, ind) => {\n        if (compare(elem, data)) index = ind;\n      });\n      favoriteBooks.splice(index, 1);\n    }\n    setLiked(curr => !curr);\n    localStorage.setItem(\"favoriteBooks\", JSON.stringify(favoriteBooks));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"img\", {\n    className: \"book__hearth\",\n    src: liked ? Selected : NotSelected,\n    onClick: clickHandler\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n};\n\n_c3 = Hearth;\n\nconst Authors = _ref4 => {\n  _s2();\n\n  let {\n    authors\n  } = _ref4;\n  const [show, setShow] = useState(false);\n\n  const leaveHandler = () => {\n    setTimeout(() => {\n      setShow(false);\n    }, 2000);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"book__relative\",\n    children: [show && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"book__hiddenAuthors\",\n      children: authors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"book__author\",\n      onMouseEnter: () => setShow(true),\n      onMouseLeave: leaveHandler,\n      children: authors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(Authors, \"NKb1ZOdhT+qUsWLXSgjSS2bk2C4=\");\n\n_c4 = Authors;\n\nconst Image = _ref5 => {\n  let {\n    image,\n    style\n  } = _ref5;\n  return /*#__PURE__*/_jsxDEV(\"img\", {\n    src: image,\n    className: style\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 37\n  }, this);\n};\n\n_c5 = Image;\n\nconst ShowPreview = _ref6 => {\n  _s3();\n\n  let {\n    data\n  } = _ref6;\n  const navigate = useNavigate();\n\n  const clickHandler = () => {\n    navigate(\"/preview\", {\n      state: data\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"img\", {\n    src: Eye,\n    className: \"book__eye\",\n    onClick: clickHandler\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 10\n  }, this);\n};\n\n_s3(ShowPreview, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n\n_c6 = ShowPreview;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"Book\");\n$RefreshReg$(_c2, \"Button\");\n$RefreshReg$(_c3, \"Hearth\");\n$RefreshReg$(_c4, \"Authors\");\n$RefreshReg$(_c5, \"Image\");\n$RefreshReg$(_c6, \"ShowPreview\");","map":{"version":3,"sources":["C:/My/Programesoft/Javascript/bookshop/src/globalComponents/BookCard.js"],"names":["React","useCallback","useEffect","useState","useMemo","NotSelected","Selected","compare","Eye","starFilled","starHalfFilled","starEmpty","useNavigate","Book","data","mode","isInFavorites","favoriteBooks","JSON","parse","localStorage","getItem","i","length","liked","setLiked","getStars","amount","mass","roundNumber","Math","floor","push","map","elem","returnBook","title","stars","rating","image","authors","description","Button","style","link","canBeBought","listPrice","Hearth","clickHandler","index","forEach","ind","splice","curr","setItem","stringify","Authors","show","setShow","leaveHandler","setTimeout","Image","ShowPreview","navigate","state"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,SAA7B,EAAwCC,QAAxC,EAAkDC,OAAlD,QAAiE,OAAjE;AACA,OAAOC,WAAP,MAAwB,gCAAxB;AACA,OAAOC,QAAP,MAAqB,sCAArB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,OAAOC,GAAP,MAAgB,0BAAhB;AACA,OAAOC,UAAP,MAAuB,iCAAvB;AACA,OAAOC,cAAP,MAA2B,qCAA3B;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,SAASC,WAAT,QAA4B,kBAA5B;;;AACA,MAAMC,IAAI,GAAG,QAAoB;AAAA;;AAAA,MAAnB;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GAAmB;AAC/B,QAAMC,aAAa,GAAGZ,OAAO,CAAC,MAAM;AAClC,UAAMa,aAAa,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAAtB;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,aAAa,CAACM,MAAlC,EAA0CD,CAAC,EAA3C,EAA+C;AAC7C,UAAIf,OAAO,CAACU,aAAa,CAACK,CAAD,CAAd,EAAmBR,IAAnB,CAAX,EAAqC,OAAO,IAAP;AACtC;;AACD,WAAO,KAAP;AACD,GAN4B,EAM1B,EAN0B,CAA7B;AAOA,QAAM,CAACU,KAAD,EAAQC,QAAR,IAAoBtB,QAAQ,CAACa,aAAD,CAAlC;;AACA,QAAMU,QAAQ,GAAIC,MAAD,IAAY;AAC3B,UAAMC,IAAI,GAAG,EAAb;AAAA,UACEC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWJ,MAAX,CADhB;;AAEA,SAAK,IAAIL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGO,WAApB,EAAiCP,CAAC,EAAlC,EAAsC;AACpCM,MAAAA,IAAI,CAACI,IAAL,CAAUvB,UAAV;AACD;;AACD,QAAIkB,MAAM,IAAIE,WAAd,EAA2BD,IAAI,CAACI,IAAL,CAAUtB,cAAV;AAC3B,UAAMa,MAAM,GAAGK,IAAI,CAACL,MAApB;;AACA,SAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,IAAIC,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACnCM,MAAAA,IAAI,CAACI,IAAL,CAAUrB,SAAV;AACD;;AACD,WAAOiB,IAAI,CAACK,GAAL,CAAUC,IAAD,iBAAU;AAAK,MAAA,GAAG,EAAEA;AAAV;AAAA;AAAA;AAAA;AAAA,YAAnB,CAAP;AACD,GAZD;;AAaA,QAAMC,UAAU,GAAG,MAAM;AACvB,UAAMC,KAAK,gBAAG;AAAG,MAAA,SAAS,EAAC,aAAb;AAAA,gBAA4BtB,IAAI,CAACsB;AAAjC;AAAA;AAAA;AAAA;AAAA,YAAd;AAAA,UACEC,KAAK,gBAAG;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA,gBAA8BX,QAAQ,CAACZ,IAAI,CAACwB,MAAN;AAAtC;AAAA;AAAA;AAAA;AAAA,YADV;;AAEA,QAAIvB,IAAI,IAAI,QAAZ,EACE,oBACE;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA,gCACE,QAAC,WAAD;AAAa,UAAA,IAAI,EAAED;AAAnB;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,KAAD;AAAO,UAAA,KAAK,EAAEA,IAAI,CAACyB,KAAnB;AAA0B,UAAA,KAAK,EAAC;AAAhC;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE,QAAC,MAAD;AAAcf,UAAAA,KAAd;AAAqBC,UAAAA,QAArB;AAA+BX,UAAAA;AAA/B;AAAA;AAAA;AAAA;AAAA,gBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAMGsB,KANH,eAOE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA,mBACGC,KADH,eAEE,QAAC,OAAD;AAAS,UAAA,OAAO,EAAEvB,IAAI,CAAC0B;AAAvB;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAPF,eAWE,QAAC,MAAD;AAAQ,QAAA,IAAI,EAAE1B,IAAd;AAAoB,QAAA,KAAK,EAAC;AAA1B;AAAA;AAAA;AAAA;AAAA,cAXF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADF,KAgBK,IAAIC,IAAI,IAAI,OAAZ,EACH,oBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA,gCACE,QAAC,WAAD;AAAa,UAAA,IAAI,EAAED;AAAnB;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,KAAD;AAAO,UAAA,KAAK,EAAEA,IAAI,CAACyB,KAAnB;AAA0B,UAAA,KAAK,EAAC;AAAhC;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE,QAAC,MAAD;AAAcf,UAAAA,KAAd;AAAqBC,UAAAA,QAArB;AAA+BX,UAAAA;AAA/B;AAAA;AAAA;AAAA;AAAA,gBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAME;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA,mBACGsB,KADH,eAEE;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,MAAf;AAAA,uBACGC,KADH,eAEE,QAAC,OAAD;AAAS,cAAA,OAAO,EAAEvB,IAAI,CAAC0B;AAAvB;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAKE,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAC,mBAAd;AAAkC,YAAA,IAAI,EAAE1B;AAAxC;AAAA;AAAA;AAAA;AAAA,kBALF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eASE;AAAG,UAAA,SAAS,EAAC,mBAAb;AAAA,oBAAkCA,IAAI,CAAC2B;AAAvC;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADG,KAsBH,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,8BACE,QAAC,KAAD;AAAO,QAAA,KAAK,EAAE3B,IAAI,CAACyB,KAAnB;AAA0B,QAAA,KAAK,EAAC;AAAhC;AAAA;AAAA;AAAA;AAAA,cADF,EAEGH,KAFH;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAMH,GA/CD;;AAgDA,SAAOD,UAAU,EAAjB;AACD,CAvED;;GAAMtB,I;;KAAAA,I;AAwEN,eAAeA,IAAf;;AACA,MAAM6B,MAAM,GAAG;AAAA,MAAC;AAAE5B,IAAAA,IAAF;AAAQ6B,IAAAA;AAAR,GAAD;AAAA,sBACb;AAAG,IAAA,SAAS,EAAE,YAAYA,KAA1B;AAAiC,IAAA,IAAI,EAAE7B,IAAI,CAAC8B,IAA5C;AAAkD,IAAA,MAAM,EAAC,QAAzD;AAAA,2BACE;AAAA,iBACG9B,IAAI,CAAC+B,WAAL,GAAoB,KAApB,GAA2B,MAD9B,UAC0C,GAD1C,eAEE;AAAA,kBAAO/B,IAAI,CAAC+B,WAAL,GAAmB/B,IAAI,CAACgC,SAAxB,GAAoC;AAA3C;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADa;AAAA,CAAf;;MAAMJ,M;;AAQN,MAAMK,MAAM,GAAG,SAA+B;AAAA,MAA9B;AAAEvB,IAAAA,KAAF;AAASC,IAAAA,QAAT;AAAmBX,IAAAA;AAAnB,GAA8B;;AAC5C,QAAMkC,YAAY,GAAG,MAAM;AACzB,UAAM/B,aAAa,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAAtB;AACA,QAAI,CAACG,KAAL,EAAYP,aAAa,CAACe,IAAd,CAAmBlB,IAAnB,EAAZ,KACK;AACH,UAAImC,KAAJ;AACAhC,MAAAA,aAAa,CAACiC,OAAd,CAAsB,CAAChB,IAAD,EAAOiB,GAAP,KAAe;AACnC,YAAI5C,OAAO,CAAC2B,IAAD,EAAOpB,IAAP,CAAX,EAAyBmC,KAAK,GAAGE,GAAR;AAC1B,OAFD;AAGAlC,MAAAA,aAAa,CAACmC,MAAd,CAAqBH,KAArB,EAA4B,CAA5B;AACD;AACDxB,IAAAA,QAAQ,CAAE4B,IAAD,IAAU,CAACA,IAAZ,CAAR;AACAjC,IAAAA,YAAY,CAACkC,OAAb,CAAqB,eAArB,EAAsCpC,IAAI,CAACqC,SAAL,CAAetC,aAAf,CAAtC;AACD,GAZD;;AAaA,sBACE;AACE,IAAA,SAAS,EAAC,cADZ;AAEE,IAAA,GAAG,EAAEO,KAAK,GAAGlB,QAAH,GAAcD,WAF1B;AAGE,IAAA,OAAO,EAAE2C;AAHX;AAAA;AAAA;AAAA;AAAA,UADF;AAOD,CArBD;;MAAMD,M;;AAsBN,MAAMS,OAAO,GAAG,SAAiB;AAAA;;AAAA,MAAhB;AAAEhB,IAAAA;AAAF,GAAgB;AAC/B,QAAM,CAACiB,IAAD,EAAOC,OAAP,IAAkBvD,QAAQ,CAAC,KAAD,CAAhC;;AACA,QAAMwD,YAAY,GAAG,MAAM;AACzBC,IAAAA,UAAU,CAAC,MAAM;AACfF,MAAAA,OAAO,CAAC,KAAD,CAAP;AACD,KAFS,EAEP,IAFO,CAAV;AAGD,GAJD;;AAKA,sBACE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA,eACGD,IAAI,iBAAI;AAAG,MAAA,SAAS,EAAC,qBAAb;AAAA,gBAAoCjB;AAApC;AAAA;AAAA;AAAA;AAAA,YADX,eAEE;AACE,MAAA,SAAS,EAAC,cADZ;AAEE,MAAA,YAAY,EAAE,MAAMkB,OAAO,CAAC,IAAD,CAF7B;AAGE,MAAA,YAAY,EAAEC,YAHhB;AAAA,gBAKGnB;AALH;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAYD,CAnBD;;IAAMgB,O;;MAAAA,O;;AAoBN,MAAMK,KAAK,GAAG;AAAA,MAAC;AAAEtB,IAAAA,KAAF;AAASI,IAAAA;AAAT,GAAD;AAAA,sBAAsB;AAAK,IAAA,GAAG,EAAEJ,KAAV;AAAiB,IAAA,SAAS,EAAEI;AAA5B;AAAA;AAAA;AAAA;AAAA,UAAtB;AAAA,CAAd;;MAAMkB,K;;AACN,MAAMC,WAAW,GAAG,SAAc;AAAA;;AAAA,MAAb;AAAEhD,IAAAA;AAAF,GAAa;AAChC,QAAMiD,QAAQ,GAAGnD,WAAW,EAA5B;;AACA,QAAMoC,YAAY,GAAG,MAAM;AACzBe,IAAAA,QAAQ,CAAC,UAAD,EAAa;AAAEC,MAAAA,KAAK,EAAElD;AAAT,KAAb,CAAR;AACD,GAFD;;AAGA,sBAAO;AAAK,IAAA,GAAG,EAAEN,GAAV;AAAe,IAAA,SAAS,EAAC,WAAzB;AAAqC,IAAA,OAAO,EAAEwC;AAA9C;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,CAND;;IAAMc,W;UACalD,W;;;MADbkD,W","sourcesContent":["import React, { useCallback, useEffect, useState, useMemo } from \"react\";\r\nimport NotSelected from \"../assets/images/favourite.png\";\r\nimport Selected from \"../assets/images/favouriteActive.png\";\r\nimport compare from \"../functions/compare\";\r\nimport Eye from \"../assets/images/eye.png\";\r\nimport starFilled from \"../assets/images/starFilled.png\";\r\nimport starHalfFilled from \"../assets/images/starHalfFilled.png\";\r\nimport starEmpty from \"../assets/images/starEmpty.png\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nconst Book = ({ data, mode }) => {\r\n  const isInFavorites = useMemo(() => {\r\n    const favoriteBooks = JSON.parse(localStorage.getItem(\"favoriteBooks\"));\r\n    for (let i = 0; i < favoriteBooks.length; i++) {\r\n      if (compare(favoriteBooks[i], data)) return true;\r\n    }\r\n    return false;\r\n  }, []);\r\n  const [liked, setLiked] = useState(isInFavorites);\r\n  const getStars = (amount) => {\r\n    const mass = [],\r\n      roundNumber = Math.floor(amount);\r\n    for (let i = 0; i < roundNumber; i++) {\r\n      mass.push(starFilled);\r\n    }\r\n    if (amount != roundNumber) mass.push(starHalfFilled);\r\n    const length = mass.length;\r\n    for (let i = 0; i < 5 - length; i++) {\r\n      mass.push(starEmpty);\r\n    }\r\n    return mass.map((elem) => <img src={elem} />);\r\n  };\r\n  const returnBook = () => {\r\n    const title = <p className=\"book__title\">{data.title}</p>,\r\n      stars = <div className=\"book__stars\">{getStars(data.rating)}</div>;\r\n    if (mode == \"normal\")\r\n      return (\r\n        <div className=\"book beet2 book__align\">\r\n          <div className=\"book__imageBlock\">\r\n            <ShowPreview data={data} />\r\n            <Image image={data.image} style=\"book__imageBig\" />\r\n            <Hearth {...{ liked, setLiked, data }} />\r\n          </div>\r\n          {title}\r\n          <div className=\"book__container beet\">\r\n            {stars}\r\n            <Authors authors={data.authors} />\r\n          </div>\r\n          <Button data={data} style=\"book__normalButton\" />\r\n        </div>\r\n      );\r\n    else if (mode == \"large\")\r\n      return (\r\n        <div className=\"book beet\">\r\n          <div className=\"book__largeBlock\">\r\n            <ShowPreview data={data} />\r\n            <Image image={data.image} style=\"book__imageSmall\" />\r\n            <Hearth {...{ liked, setLiked, data }} />\r\n          </div>\r\n          <div className=\"book__largeContainer\">\r\n            {title}\r\n            <div className=\"book__mass beet\">\r\n              <div className=\"beet\">\r\n                {stars}\r\n                <Authors authors={data.authors} />\r\n              </div>\r\n              <Button style=\"book__largeButton\" data={data} />\r\n            </div>\r\n            <p className=\"book__description\">{data.description}</p>\r\n          </div>\r\n        </div>\r\n      );\r\n    else\r\n      return (\r\n        <div className=\"book beet2\">\r\n          <Image image={data.image} style=\"book__imageSmall\" />\r\n          {title}\r\n        </div>\r\n      );\r\n  };\r\n  return returnBook();\r\n};\r\nexport default Book;\r\nconst Button = ({ data, style }) => (\r\n  <a className={\"button \" + style} href={data.link} target=\"_blank\">\r\n    <p>\r\n      {data.canBeBought ? `Buy` : \"Read\"} for{\" \"}\r\n      <span>{data.canBeBought ? data.listPrice : \"free\"}</span>\r\n    </p>\r\n  </a>\r\n);\r\nconst Hearth = ({ liked, setLiked, data }) => {\r\n  const clickHandler = () => {\r\n    const favoriteBooks = JSON.parse(localStorage.getItem(\"favoriteBooks\"));\r\n    if (!liked) favoriteBooks.push(data);\r\n    else {\r\n      let index;\r\n      favoriteBooks.forEach((elem, ind) => {\r\n        if (compare(elem, data)) index = ind;\r\n      });\r\n      favoriteBooks.splice(index, 1);\r\n    }\r\n    setLiked((curr) => !curr);\r\n    localStorage.setItem(\"favoriteBooks\", JSON.stringify(favoriteBooks));\r\n  };\r\n  return (\r\n    <img\r\n      className=\"book__hearth\"\r\n      src={liked ? Selected : NotSelected}\r\n      onClick={clickHandler}\r\n    />\r\n  );\r\n};\r\nconst Authors = ({ authors }) => {\r\n  const [show, setShow] = useState(false);\r\n  const leaveHandler = () => {\r\n    setTimeout(() => {\r\n      setShow(false);\r\n    }, 2000);\r\n  };\r\n  return (\r\n    <div className=\"book__relative\">\r\n      {show && <p className=\"book__hiddenAuthors\">{authors}</p>}\r\n      <p\r\n        className=\"book__author\"\r\n        onMouseEnter={() => setShow(true)}\r\n        onMouseLeave={leaveHandler}\r\n      >\r\n        {authors}\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\nconst Image = ({ image, style }) => <img src={image} className={style} />;\r\nconst ShowPreview = ({ data }) => {\r\n  const navigate = useNavigate();\r\n  const clickHandler = () => {\r\n    navigate(\"/preview\", { state: data });\r\n  };\r\n  return <img src={Eye} className=\"book__eye\" onClick={clickHandler} />;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}