{"ast":null,"code":"function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nimport appendImportantToEachValue from './append-important-to-each-value';\nimport cssRuleSetToString from './css-rule-set-to-string';\nimport getState from './get-state';\nimport getStateKey from './get-state-key';\nimport cleanStateKey from './clean-state-key';\nimport getRadiumStyleState from './get-radium-style-state';\nimport hash from './hash';\nimport { isNestedStyle, mergeStyles } from './merge-styles';\nimport Plugins from './plugins/';\nimport ExecutionEnvironment from 'exenv';\nimport React from 'react';\nimport StyleKeeper from './style-keeper';\nvar DEFAULT_CONFIG = {\n  plugins: [Plugins.mergeStyleArray, Plugins.checkProps, Plugins.resolveMediaQueries, Plugins.resolveInteractionStyles, Plugins.keyframes, Plugins.visited, Plugins.removeNestedStyles, Plugins.prefix, Plugins.checkProps]\n}; // Gross\n\nvar globalState = {}; // Only for use by tests\n\nvar __isTestModeEnabled = false; // Declare early for recursive helpers.\n\nvar _resolveStyles5 = null;\n\nvar _shouldResolveStyles = function _shouldResolveStyles(component) {\n  return component.type && !component.type._isRadiumEnhanced;\n};\n\nvar _resolveChildren = function _resolveChildren(_ref) {\n  var children = _ref.children,\n      component = _ref.component,\n      config = _ref.config,\n      existingKeyMap = _ref.existingKeyMap,\n      extraStateKeyMap = _ref.extraStateKeyMap;\n\n  if (!children) {\n    return children;\n  }\n\n  var childrenType = _typeof(children);\n\n  if (childrenType === 'string' || childrenType === 'number') {\n    // Don't do anything with a single primitive child\n    return children;\n  }\n\n  if (childrenType === 'function') {\n    // Wrap the function, resolving styles on the result\n    return function () {\n      var result = children.apply(this, arguments);\n\n      if (React.isValidElement(result)) {\n        var _key = getStateKey(result);\n\n        delete extraStateKeyMap[_key];\n\n        var _resolveStyles = _resolveStyles5(component, result, config, existingKeyMap, true, extraStateKeyMap),\n            element = _resolveStyles.element;\n\n        return element;\n      }\n\n      return result;\n    };\n  }\n\n  if (React.Children.count(children) === 1 && children.type) {\n    // If a React Element is an only child, don't wrap it in an array for\n    // React.Children.map() for React.Children.only() compatibility.\n    var onlyChild = React.Children.only(children);\n\n    var _key2 = getStateKey(onlyChild);\n\n    delete extraStateKeyMap[_key2];\n\n    var _resolveStyles2 = _resolveStyles5(component, onlyChild, config, existingKeyMap, true, extraStateKeyMap),\n        element = _resolveStyles2.element;\n\n    return element;\n  }\n\n  return React.Children.map(children, function (child) {\n    if (React.isValidElement(child)) {\n      var _key3 = getStateKey(child);\n\n      delete extraStateKeyMap[_key3];\n\n      var _resolveStyles3 = _resolveStyles5(component, child, config, existingKeyMap, true, extraStateKeyMap),\n          _element = _resolveStyles3.element;\n\n      return _element;\n    }\n\n    return child;\n  });\n}; // Recurse over props, just like children\n\n\nvar _resolveProps = function _resolveProps(_ref2) {\n  var component = _ref2.component,\n      config = _ref2.config,\n      existingKeyMap = _ref2.existingKeyMap,\n      props = _ref2.props,\n      extraStateKeyMap = _ref2.extraStateKeyMap;\n  var newProps = props;\n  Object.keys(props).forEach(function (prop) {\n    // We already recurse over children above\n    if (prop === 'children') {\n      return;\n    }\n\n    var propValue = props[prop];\n\n    if (React.isValidElement(propValue)) {\n      var _key4 = getStateKey(propValue);\n\n      delete extraStateKeyMap[_key4];\n      newProps = _objectSpread({}, newProps);\n\n      var _resolveStyles4 = _resolveStyles5(component, propValue, config, existingKeyMap, true, extraStateKeyMap),\n          element = _resolveStyles4.element;\n\n      newProps[prop] = element;\n    }\n  });\n  return newProps;\n};\n\nvar _buildGetKey = function _buildGetKey(_ref3) {\n  var componentName = _ref3.componentName,\n      existingKeyMap = _ref3.existingKeyMap,\n      renderedElement = _ref3.renderedElement; // We need a unique key to correlate state changes due to user interaction\n  // with the rendered element, so we know to apply the proper interactive\n  // styles.\n\n  var originalKey = getStateKey(renderedElement);\n  var key = cleanStateKey(originalKey);\n  var alreadyGotKey = false;\n\n  var getKey = function getKey() {\n    if (alreadyGotKey) {\n      return key;\n    }\n\n    alreadyGotKey = true;\n\n    if (existingKeyMap[key]) {\n      var elementName;\n\n      if (typeof renderedElement.type === 'string') {\n        elementName = renderedElement.type;\n      } else if (renderedElement.type.constructor) {\n        elementName = renderedElement.type.constructor.displayName || renderedElement.type.constructor.name;\n      }\n\n      throw new Error('Radium requires each element with interactive styles to have a unique ' + 'key, set using either the ref or key prop. ' + (originalKey ? 'Key \"' + originalKey + '\" is a duplicate.' : 'Multiple elements have no key specified.') + ' ' + 'Component: \"' + componentName + '\". ' + (elementName ? 'Element: \"' + elementName + '\".' : ''));\n    }\n\n    existingKeyMap[key] = true;\n    return key;\n  };\n\n  return getKey;\n};\n\nvar _setStyleState = function _setStyleState(component, key, stateKey, value) {\n  if (!component._radiumIsMounted) {\n    return;\n  }\n\n  var existing = getRadiumStyleState(component);\n  var state = {\n    _radiumStyleState: _objectSpread({}, existing)\n  };\n  state._radiumStyleState[key] = _objectSpread({}, state._radiumStyleState[key]);\n  state._radiumStyleState[key][stateKey] = value;\n  component._lastRadiumState = state._radiumStyleState;\n  component.setState(state);\n};\n\nvar _runPlugins = function _runPlugins(_ref4) {\n  var component = _ref4.component,\n      config = _ref4.config,\n      existingKeyMap = _ref4.existingKeyMap,\n      props = _ref4.props,\n      renderedElement = _ref4.renderedElement; // Don't run plugins if renderedElement is not a simple ReactDOMElement or has\n  // no style.\n\n  if (!React.isValidElement(renderedElement) || typeof renderedElement.type !== 'string' || !props.style) {\n    return props;\n  }\n\n  var newProps = props;\n  var plugins = config.plugins || DEFAULT_CONFIG.plugins;\n  var componentName = component.constructor.displayName || component.constructor.name;\n\n  var getKey = _buildGetKey({\n    renderedElement: renderedElement,\n    existingKeyMap: existingKeyMap,\n    componentName: componentName\n  });\n\n  var getComponentField = function getComponentField(key) {\n    return component[key];\n  };\n\n  var getGlobalState = function getGlobalState(key) {\n    return globalState[key];\n  };\n\n  var componentGetState = function componentGetState(stateKey, elementKey) {\n    return getState(component.state, elementKey || getKey(), stateKey);\n  };\n\n  var setState = function setState(stateKey, value, elementKey) {\n    return _setStyleState(component, elementKey || getKey(), stateKey, value);\n  };\n\n  var addCSS = function addCSS(css) {\n    var styleKeeper = component._radiumStyleKeeper;\n\n    if (!styleKeeper) {\n      if (__isTestModeEnabled) {\n        return {\n          remove: function remove() {}\n        };\n      }\n\n      throw new Error('To use plugins requiring `addCSS` (e.g. keyframes, media queries), ' + 'please wrap your application in the StyleRoot component. Component ' + 'name: `' + componentName + '`.');\n    }\n\n    return styleKeeper.addCSS(css);\n  };\n\n  var newStyle = props.style;\n  plugins.forEach(function (plugin) {\n    var result = plugin({\n      ExecutionEnvironment: ExecutionEnvironment,\n      addCSS: addCSS,\n      appendImportantToEachValue: appendImportantToEachValue,\n      componentName: componentName,\n      config: config,\n      cssRuleSetToString: cssRuleSetToString,\n      getComponentField: getComponentField,\n      getGlobalState: getGlobalState,\n      getState: componentGetState,\n      hash: hash,\n      mergeStyles: mergeStyles,\n      props: newProps,\n      setState: setState,\n      isNestedStyle: isNestedStyle,\n      style: newStyle\n    }) || {};\n    newStyle = result.style || newStyle;\n    newProps = result.props && Object.keys(result.props).length ? _objectSpread({}, newProps, result.props) : newProps;\n    var newComponentFields = result.componentFields || {};\n    Object.keys(newComponentFields).forEach(function (fieldName) {\n      component[fieldName] = newComponentFields[fieldName];\n    });\n    var newGlobalState = result.globalState || {};\n    Object.keys(newGlobalState).forEach(function (key) {\n      globalState[key] = newGlobalState[key];\n    });\n  });\n\n  if (newStyle !== props.style) {\n    newProps = _objectSpread({}, newProps, {\n      style: newStyle\n    });\n  }\n\n  return newProps;\n}; // Wrapper around React.cloneElement. To avoid processing the same element\n// twice, whenever we clone an element add a special prop to make sure we don't\n// process this element again.\n\n\nvar _cloneElement = function _cloneElement(renderedElement, newProps, newChildren) {\n  // Only add flag if this is a normal DOM element\n  if (typeof renderedElement.type === 'string') {\n    newProps = _objectSpread({}, newProps, {\n      'data-radium': true\n    });\n  }\n\n  return React.cloneElement(renderedElement, newProps, newChildren);\n}; //\n// The nucleus of Radium. resolveStyles is called on the rendered elements\n// before they are returned in render. It iterates over the elements and\n// children, rewriting props to add event handlers required to capture user\n// interactions (e.g. mouse over). It also replaces the style prop because it\n// adds in the various interaction styles (e.g. :hover).\n//\n\n/* eslint-disable max-params */\n\n\n_resolveStyles5 = function resolveStyles(component, renderedElement) {\n  var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_CONFIG;\n  var existingKeyMap = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var shouldCheckBeforeResolve = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  var extraStateKeyMap = arguments.length > 5 ? arguments[5] : undefined; // The extraStateKeyMap is for determining which keys should be erased from\n  // the state (i.e. which child components are unmounted and should no longer\n  // have a style state).\n\n  if (!extraStateKeyMap) {\n    var state = getRadiumStyleState(component);\n    extraStateKeyMap = Object.keys(state).reduce(function (acc, key) {\n      // 'main' is the auto-generated key when there is only one element with\n      // interactive styles and if a custom key is not assigned. Because of\n      // this, it is impossible to know which child is 'main', so we won't\n      // count this key when generating our extraStateKeyMap.\n      if (key !== 'main') {\n        acc[key] = true;\n      }\n\n      return acc;\n    }, {});\n  }\n\n  if (Array.isArray(renderedElement) && !renderedElement.props) {\n    var elements = renderedElement.map(function (element) {\n      // element is in-use, so remove from the extraStateKeyMap\n      if (extraStateKeyMap) {\n        var _key5 = getStateKey(element);\n\n        delete extraStateKeyMap[_key5];\n      } // this element is an array of elements,\n      // so return an array of elements with resolved styles\n\n\n      return _resolveStyles5(component, element, config, existingKeyMap, shouldCheckBeforeResolve, extraStateKeyMap).element;\n    });\n    return {\n      extraStateKeyMap: extraStateKeyMap,\n      element: elements\n    };\n  } // ReactElement\n\n\n  if (!renderedElement || // Bail if we've already processed this element. This ensures that only the\n  // owner of an element processes that element, since the owner's render\n  // function will be called first (which will always be the case, since you\n  // can't know what else to render until you render the parent component).\n  renderedElement.props && renderedElement.props['data-radium'] || // Bail if this element is a radium enhanced element, because if it is,\n  // then it will take care of resolving its own styles.\n  shouldCheckBeforeResolve && !_shouldResolveStyles(renderedElement)) {\n    return {\n      extraStateKeyMap: extraStateKeyMap,\n      element: renderedElement\n    };\n  }\n\n  var children = renderedElement.props.children;\n\n  var newChildren = _resolveChildren({\n    children: children,\n    component: component,\n    config: config,\n    existingKeyMap: existingKeyMap,\n    extraStateKeyMap: extraStateKeyMap\n  });\n\n  var newProps = _resolveProps({\n    component: component,\n    config: config,\n    existingKeyMap: existingKeyMap,\n    extraStateKeyMap: extraStateKeyMap,\n    props: renderedElement.props\n  });\n\n  newProps = _runPlugins({\n    component: component,\n    config: config,\n    existingKeyMap: existingKeyMap,\n    props: newProps,\n    renderedElement: renderedElement\n  }); // If nothing changed, don't bother cloning the element. Might be a bit\n  // wasteful, as we add the sentinel to stop double-processing when we clone.\n  // Assume benign double-processing is better than unneeded cloning.\n\n  if (newChildren === children && newProps === renderedElement.props) {\n    return {\n      extraStateKeyMap: extraStateKeyMap,\n      element: renderedElement\n    };\n  }\n\n  var element = _cloneElement(renderedElement, newProps !== renderedElement.props ? newProps : {}, newChildren);\n\n  return {\n    extraStateKeyMap: extraStateKeyMap,\n    element: element\n  };\n};\n/* eslint-enable max-params */\n// Only for use by tests\n\n\nif (process.env.NODE_ENV !== 'production') {\n  _resolveStyles5.__clearStateForTests = function () {\n    globalState = {};\n  };\n\n  _resolveStyles5.__setTestMode = function (isEnabled) {\n    __isTestModeEnabled = isEnabled;\n  };\n}\n\nexport default _resolveStyles5;","map":{"version":3,"sources":["C:/My/Programesoft/Javascript/bookshop/node_modules/radium/es/resolve-styles.js"],"names":["_objectSpread","target","i","arguments","length","source","ownKeys","Object","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","_typeof","Symbol","iterator","constructor","prototype","appendImportantToEachValue","cssRuleSetToString","getState","getStateKey","cleanStateKey","getRadiumStyleState","hash","isNestedStyle","mergeStyles","Plugins","ExecutionEnvironment","React","StyleKeeper","DEFAULT_CONFIG","plugins","mergeStyleArray","checkProps","resolveMediaQueries","resolveInteractionStyles","keyframes","visited","removeNestedStyles","prefix","globalState","__isTestModeEnabled","_resolveStyles5","_shouldResolveStyles","component","type","_isRadiumEnhanced","_resolveChildren","_ref","children","config","existingKeyMap","extraStateKeyMap","childrenType","result","apply","isValidElement","_key","_resolveStyles","element","Children","count","onlyChild","only","_key2","_resolveStyles2","map","child","_key3","_resolveStyles3","_element","_resolveProps","_ref2","props","newProps","prop","propValue","_key4","_resolveStyles4","_buildGetKey","_ref3","componentName","renderedElement","originalKey","alreadyGotKey","getKey","elementName","displayName","name","Error","_setStyleState","stateKey","_radiumIsMounted","existing","state","_radiumStyleState","_lastRadiumState","setState","_runPlugins","_ref4","style","getComponentField","getGlobalState","componentGetState","elementKey","addCSS","css","styleKeeper","_radiumStyleKeeper","remove","newStyle","plugin","newComponentFields","componentFields","fieldName","newGlobalState","_cloneElement","newChildren","cloneElement","resolveStyles","undefined","shouldCheckBeforeResolve","reduce","acc","Array","isArray","elements","_key5","process","env","NODE_ENV","__clearStateForTests","__setTestMode","isEnabled"],"mappings":"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","sourcesContent":["function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport appendImportantToEachValue from './append-important-to-each-value';\nimport cssRuleSetToString from './css-rule-set-to-string';\nimport getState from './get-state';\nimport getStateKey from './get-state-key';\nimport cleanStateKey from './clean-state-key';\nimport getRadiumStyleState from './get-radium-style-state';\nimport hash from './hash';\nimport { isNestedStyle, mergeStyles } from './merge-styles';\nimport Plugins from './plugins/';\nimport ExecutionEnvironment from 'exenv';\nimport React from 'react';\nimport StyleKeeper from './style-keeper';\nvar DEFAULT_CONFIG = {\n  plugins: [Plugins.mergeStyleArray, Plugins.checkProps, Plugins.resolveMediaQueries, Plugins.resolveInteractionStyles, Plugins.keyframes, Plugins.visited, Plugins.removeNestedStyles, Plugins.prefix, Plugins.checkProps]\n}; // Gross\n\nvar globalState = {}; // Only for use by tests\n\nvar __isTestModeEnabled = false;\n// Declare early for recursive helpers.\nvar _resolveStyles5 = null;\n\nvar _shouldResolveStyles = function _shouldResolveStyles(component) {\n  return component.type && !component.type._isRadiumEnhanced;\n};\n\nvar _resolveChildren = function _resolveChildren(_ref) {\n  var children = _ref.children,\n      component = _ref.component,\n      config = _ref.config,\n      existingKeyMap = _ref.existingKeyMap,\n      extraStateKeyMap = _ref.extraStateKeyMap;\n\n  if (!children) {\n    return children;\n  }\n\n  var childrenType = _typeof(children);\n\n  if (childrenType === 'string' || childrenType === 'number') {\n    // Don't do anything with a single primitive child\n    return children;\n  }\n\n  if (childrenType === 'function') {\n    // Wrap the function, resolving styles on the result\n    return function () {\n      var result = children.apply(this, arguments);\n\n      if (React.isValidElement(result)) {\n        var _key = getStateKey(result);\n\n        delete extraStateKeyMap[_key];\n\n        var _resolveStyles = _resolveStyles5(component, result, config, existingKeyMap, true, extraStateKeyMap),\n            element = _resolveStyles.element;\n\n        return element;\n      }\n\n      return result;\n    };\n  }\n\n  if (React.Children.count(children) === 1 && children.type) {\n    // If a React Element is an only child, don't wrap it in an array for\n    // React.Children.map() for React.Children.only() compatibility.\n    var onlyChild = React.Children.only(children);\n\n    var _key2 = getStateKey(onlyChild);\n\n    delete extraStateKeyMap[_key2];\n\n    var _resolveStyles2 = _resolveStyles5(component, onlyChild, config, existingKeyMap, true, extraStateKeyMap),\n        element = _resolveStyles2.element;\n\n    return element;\n  }\n\n  return React.Children.map(children, function (child) {\n    if (React.isValidElement(child)) {\n      var _key3 = getStateKey(child);\n\n      delete extraStateKeyMap[_key3];\n\n      var _resolveStyles3 = _resolveStyles5(component, child, config, existingKeyMap, true, extraStateKeyMap),\n          _element = _resolveStyles3.element;\n\n      return _element;\n    }\n\n    return child;\n  });\n}; // Recurse over props, just like children\n\n\nvar _resolveProps = function _resolveProps(_ref2) {\n  var component = _ref2.component,\n      config = _ref2.config,\n      existingKeyMap = _ref2.existingKeyMap,\n      props = _ref2.props,\n      extraStateKeyMap = _ref2.extraStateKeyMap;\n  var newProps = props;\n  Object.keys(props).forEach(function (prop) {\n    // We already recurse over children above\n    if (prop === 'children') {\n      return;\n    }\n\n    var propValue = props[prop];\n\n    if (React.isValidElement(propValue)) {\n      var _key4 = getStateKey(propValue);\n\n      delete extraStateKeyMap[_key4];\n      newProps = _objectSpread({}, newProps);\n\n      var _resolveStyles4 = _resolveStyles5(component, propValue, config, existingKeyMap, true, extraStateKeyMap),\n          element = _resolveStyles4.element;\n\n      newProps[prop] = element;\n    }\n  });\n  return newProps;\n};\n\nvar _buildGetKey = function _buildGetKey(_ref3) {\n  var componentName = _ref3.componentName,\n      existingKeyMap = _ref3.existingKeyMap,\n      renderedElement = _ref3.renderedElement;\n  // We need a unique key to correlate state changes due to user interaction\n  // with the rendered element, so we know to apply the proper interactive\n  // styles.\n  var originalKey = getStateKey(renderedElement);\n  var key = cleanStateKey(originalKey);\n  var alreadyGotKey = false;\n\n  var getKey = function getKey() {\n    if (alreadyGotKey) {\n      return key;\n    }\n\n    alreadyGotKey = true;\n\n    if (existingKeyMap[key]) {\n      var elementName;\n\n      if (typeof renderedElement.type === 'string') {\n        elementName = renderedElement.type;\n      } else if (renderedElement.type.constructor) {\n        elementName = renderedElement.type.constructor.displayName || renderedElement.type.constructor.name;\n      }\n\n      throw new Error('Radium requires each element with interactive styles to have a unique ' + 'key, set using either the ref or key prop. ' + (originalKey ? 'Key \"' + originalKey + '\" is a duplicate.' : 'Multiple elements have no key specified.') + ' ' + 'Component: \"' + componentName + '\". ' + (elementName ? 'Element: \"' + elementName + '\".' : ''));\n    }\n\n    existingKeyMap[key] = true;\n    return key;\n  };\n\n  return getKey;\n};\n\nvar _setStyleState = function _setStyleState(component, key, stateKey, value) {\n  if (!component._radiumIsMounted) {\n    return;\n  }\n\n  var existing = getRadiumStyleState(component);\n  var state = {\n    _radiumStyleState: _objectSpread({}, existing)\n  };\n  state._radiumStyleState[key] = _objectSpread({}, state._radiumStyleState[key]);\n  state._radiumStyleState[key][stateKey] = value;\n  component._lastRadiumState = state._radiumStyleState;\n  component.setState(state);\n};\n\nvar _runPlugins = function _runPlugins(_ref4) {\n  var component = _ref4.component,\n      config = _ref4.config,\n      existingKeyMap = _ref4.existingKeyMap,\n      props = _ref4.props,\n      renderedElement = _ref4.renderedElement;\n\n  // Don't run plugins if renderedElement is not a simple ReactDOMElement or has\n  // no style.\n  if (!React.isValidElement(renderedElement) || typeof renderedElement.type !== 'string' || !props.style) {\n    return props;\n  }\n\n  var newProps = props;\n  var plugins = config.plugins || DEFAULT_CONFIG.plugins;\n  var componentName = component.constructor.displayName || component.constructor.name;\n\n  var getKey = _buildGetKey({\n    renderedElement: renderedElement,\n    existingKeyMap: existingKeyMap,\n    componentName: componentName\n  });\n\n  var getComponentField = function getComponentField(key) {\n    return component[key];\n  };\n\n  var getGlobalState = function getGlobalState(key) {\n    return globalState[key];\n  };\n\n  var componentGetState = function componentGetState(stateKey, elementKey) {\n    return getState(component.state, elementKey || getKey(), stateKey);\n  };\n\n  var setState = function setState(stateKey, value, elementKey) {\n    return _setStyleState(component, elementKey || getKey(), stateKey, value);\n  };\n\n  var addCSS = function addCSS(css) {\n    var styleKeeper = component._radiumStyleKeeper;\n\n    if (!styleKeeper) {\n      if (__isTestModeEnabled) {\n        return {\n          remove: function remove() {}\n        };\n      }\n\n      throw new Error('To use plugins requiring `addCSS` (e.g. keyframes, media queries), ' + 'please wrap your application in the StyleRoot component. Component ' + 'name: `' + componentName + '`.');\n    }\n\n    return styleKeeper.addCSS(css);\n  };\n\n  var newStyle = props.style;\n  plugins.forEach(function (plugin) {\n    var result = plugin({\n      ExecutionEnvironment: ExecutionEnvironment,\n      addCSS: addCSS,\n      appendImportantToEachValue: appendImportantToEachValue,\n      componentName: componentName,\n      config: config,\n      cssRuleSetToString: cssRuleSetToString,\n      getComponentField: getComponentField,\n      getGlobalState: getGlobalState,\n      getState: componentGetState,\n      hash: hash,\n      mergeStyles: mergeStyles,\n      props: newProps,\n      setState: setState,\n      isNestedStyle: isNestedStyle,\n      style: newStyle\n    }) || {};\n    newStyle = result.style || newStyle;\n    newProps = result.props && Object.keys(result.props).length ? _objectSpread({}, newProps, result.props) : newProps;\n    var newComponentFields = result.componentFields || {};\n    Object.keys(newComponentFields).forEach(function (fieldName) {\n      component[fieldName] = newComponentFields[fieldName];\n    });\n    var newGlobalState = result.globalState || {};\n    Object.keys(newGlobalState).forEach(function (key) {\n      globalState[key] = newGlobalState[key];\n    });\n  });\n\n  if (newStyle !== props.style) {\n    newProps = _objectSpread({}, newProps, {\n      style: newStyle\n    });\n  }\n\n  return newProps;\n}; // Wrapper around React.cloneElement. To avoid processing the same element\n// twice, whenever we clone an element add a special prop to make sure we don't\n// process this element again.\n\n\nvar _cloneElement = function _cloneElement(renderedElement, newProps, newChildren) {\n  // Only add flag if this is a normal DOM element\n  if (typeof renderedElement.type === 'string') {\n    newProps = _objectSpread({}, newProps, {\n      'data-radium': true\n    });\n  }\n\n  return React.cloneElement(renderedElement, newProps, newChildren);\n}; //\n// The nucleus of Radium. resolveStyles is called on the rendered elements\n// before they are returned in render. It iterates over the elements and\n// children, rewriting props to add event handlers required to capture user\n// interactions (e.g. mouse over). It also replaces the style prop because it\n// adds in the various interaction styles (e.g. :hover).\n//\n\n/* eslint-disable max-params */\n\n\n_resolveStyles5 = function resolveStyles(component, renderedElement) {\n  var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_CONFIG;\n  var existingKeyMap = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var shouldCheckBeforeResolve = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  var extraStateKeyMap = arguments.length > 5 ? arguments[5] : undefined;\n\n  // The extraStateKeyMap is for determining which keys should be erased from\n  // the state (i.e. which child components are unmounted and should no longer\n  // have a style state).\n  if (!extraStateKeyMap) {\n    var state = getRadiumStyleState(component);\n    extraStateKeyMap = Object.keys(state).reduce(function (acc, key) {\n      // 'main' is the auto-generated key when there is only one element with\n      // interactive styles and if a custom key is not assigned. Because of\n      // this, it is impossible to know which child is 'main', so we won't\n      // count this key when generating our extraStateKeyMap.\n      if (key !== 'main') {\n        acc[key] = true;\n      }\n\n      return acc;\n    }, {});\n  }\n\n  if (Array.isArray(renderedElement) && !renderedElement.props) {\n    var elements = renderedElement.map(function (element) {\n      // element is in-use, so remove from the extraStateKeyMap\n      if (extraStateKeyMap) {\n        var _key5 = getStateKey(element);\n\n        delete extraStateKeyMap[_key5];\n      } // this element is an array of elements,\n      // so return an array of elements with resolved styles\n\n\n      return _resolveStyles5(component, element, config, existingKeyMap, shouldCheckBeforeResolve, extraStateKeyMap).element;\n    });\n    return {\n      extraStateKeyMap: extraStateKeyMap,\n      element: elements\n    };\n  } // ReactElement\n\n\n  if (!renderedElement || // Bail if we've already processed this element. This ensures that only the\n  // owner of an element processes that element, since the owner's render\n  // function will be called first (which will always be the case, since you\n  // can't know what else to render until you render the parent component).\n  renderedElement.props && renderedElement.props['data-radium'] || // Bail if this element is a radium enhanced element, because if it is,\n  // then it will take care of resolving its own styles.\n  shouldCheckBeforeResolve && !_shouldResolveStyles(renderedElement)) {\n    return {\n      extraStateKeyMap: extraStateKeyMap,\n      element: renderedElement\n    };\n  }\n\n  var children = renderedElement.props.children;\n\n  var newChildren = _resolveChildren({\n    children: children,\n    component: component,\n    config: config,\n    existingKeyMap: existingKeyMap,\n    extraStateKeyMap: extraStateKeyMap\n  });\n\n  var newProps = _resolveProps({\n    component: component,\n    config: config,\n    existingKeyMap: existingKeyMap,\n    extraStateKeyMap: extraStateKeyMap,\n    props: renderedElement.props\n  });\n\n  newProps = _runPlugins({\n    component: component,\n    config: config,\n    existingKeyMap: existingKeyMap,\n    props: newProps,\n    renderedElement: renderedElement\n  }); // If nothing changed, don't bother cloning the element. Might be a bit\n  // wasteful, as we add the sentinel to stop double-processing when we clone.\n  // Assume benign double-processing is better than unneeded cloning.\n\n  if (newChildren === children && newProps === renderedElement.props) {\n    return {\n      extraStateKeyMap: extraStateKeyMap,\n      element: renderedElement\n    };\n  }\n\n  var element = _cloneElement(renderedElement, newProps !== renderedElement.props ? newProps : {}, newChildren);\n\n  return {\n    extraStateKeyMap: extraStateKeyMap,\n    element: element\n  };\n};\n/* eslint-enable max-params */\n// Only for use by tests\n\n\nif (process.env.NODE_ENV !== 'production') {\n  _resolveStyles5.__clearStateForTests = function () {\n    globalState = {};\n  };\n\n  _resolveStyles5.__setTestMode = function (isEnabled) {\n    __isTestModeEnabled = isEnabled;\n  };\n}\n\nexport default _resolveStyles5;"]},"metadata":{},"sourceType":"module"}